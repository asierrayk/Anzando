#:import Factory kivy.factory.Factory

<MenuButton@Button>:
    font_size: '32dp'

<MainMenuScreen>:
    BoxLayout:
        orientation: 'vertical'
        spacing: '30dp'
        padding: '30dp'
        MenuButton:
            text: 'Anzan'
            on_release: root.manager.current = 'anzan_menu'
        MenuButton:
            text: 'Day of week'
            on_release: Factory.NotImplementedPopup().open()
        MenuButton:
            text: 'Settings'
            on_release: Factory.NotImplementedPopup().open()
        MenuButton:
            text: 'Quit'
            on_release: app.stop()

<NotImplementedPopup@Popup>:
    size_hint_x: .8
    size_hint_y: None
    height: root.width
    auto_dismiss: False
    title: 'Information'
    title_size: '30dp'
    Button:
        text: 'This feature is not implemented yet'
        text_size: self.width, self.height
        font_size: '20dp'
        halign: 'center'
        valign: 'middle'
        padding: [1,1]
        on_release: root.dismiss()

####### ANZAN #######
<KeyboardButton@Button>:
    font_size: '32dp'

<AnzanKeyboard>:
    orientation: 'vertical'
    answer: answer_display
    BoxLayout:
        size_hint_y: .2
        Label:
            id: answer_display
            text: root.answer_text
            font_size: '72dp'
            size_hint_x: .8
            multiline: False
        Button:
            text: '<-'
            size_hint_x: .2
            on_press: root.clear()
    GridLayout:
        size_hint_y: .8
        cols: 3
        spacing: '10dp'
        padding: '10dp'
        KeyboardButton:
            text: '1'
            on_press: root.key_press(self.text)
        KeyboardButton:
            text: '2'
            on_press: root.key_press(self.text)
        KeyboardButton:
            text: '3'
            on_press: root.key_press(self.text)
        KeyboardButton:
            text: '4'
            on_press: root.key_press(self.text)
        KeyboardButton:
            text: '5'
            on_press: root.key_press(self.text)
        KeyboardButton:
            text: '6'
            on_press: root.key_press(self.text)
        KeyboardButton:
            text: '7'
            on_press: root.key_press(self.text)
        KeyboardButton:
            text: '8'
            on_press: root.key_press(self.text)
        KeyboardButton:
            text: '9'
            on_press: root.key_press(self.text)
        KeyboardButton:
            text: '-'
            on_press: root.minus()
        KeyboardButton:
            text: '0'
            on_press: root.key_press(self.text)
        KeyboardButton:
            text: 'ok'
            on_press: root.ok()

<AnzanResult>:
    orientation: 'vertical'
    Button:
        size_hint_y: .7
        background_color: 0, 0, 0, 1
        text: root.mark
        font_size: '72dp'
        on_release: root.parent.next_exercise()
    BoxLayout:
        size_hint_y: .1
        Label:
            text: "Result"
            font_size: '30dp'
        Label:
            text: str(root.result)
            font_size: '30dp'
    BoxLayout:
        size_hint_y: .1
        Label:
            text: "Your answer"
            font_size: '30dp'
        Label:
            text: str(root.answer)
            font_size: '30dp'
    BoxLayout:
        size_hint_y: .1
        Label:
            text: "Time"
            font_size: '30dp'
        Label:
            text: '{0:.3f}'.format(root.elapsed_time)
            font_size: '30dp'
    BoxLayout:
        size_hint_y: .1
        Button:
            font_size: '20dp'
            text: 'back'
            on_release: root.parent.go_back()
        Button:
            font_size: '20dp'
            text: 'next'
            on_release: root.parent.next_exercise()
        Button:
            font_size: '20dp'
            text: 'retry'
            on_release: root.parent.repeat_exercise()
        Button:
            font_size: '20dp'
            text: 'config'
            on_release: root.parent.show_config()

<AnzanMenuScreen>:
    GridLayout:
        cols: 2
        spacing: '30dp'
        padding: '30dp'
        MenuButton:
            text: 'Flash'
            on_press: root.manager.current = 'play_flash_anzan'
        MenuButton:
            text: 'List'
            on_release: Factory.NotImplementedPopup().open()
        MenuButton:
            text: 'Manual'
            on_press: root.manager.current = 'play_manual_anzan'
        MenuButton:
            text: 'Drag'
            on_release: Factory.NotImplementedPopup().open()
        MenuButton:
            text: 'Endurance'
            on_release: Factory.NotImplementedPopup().open()
        MenuButton:
            text: 'Multiple'
            on_release: Factory.NotImplementedPopup().open()
        MenuButton:
            text: 'Audio'
            on_release: Factory.NotImplementedPopup().open()
        MenuButton:
            text: 'Exam'
            on_release: Factory.NotImplementedPopup().open()
        MenuButton:
            text: 'Back'
            on_release: root.manager.current = 'main_menu'


# MANUAL #
<AnzanManual>:
    orientation: 'vertical'
    Button:
        size_hint_y: 1
        background_color: 0, 0, 0, 1
        font_size: '200dp'
        text: root.current_number
        on_press: root.next_number()

<AnzanManualConfiguration>:
    orientation: 'vertical'
    digits: digits_spinner
    times: times_spinner
    negative: negative_checkbox
    fixed: fixed_checkbox
    GridLayout:
        cols: 2
        Label:
            text: 'Digits'
        Spinner:
            id: digits_spinner
            text: '1'
            values: root.digits_values
        Label:
            text: 'Times'
        Spinner:
            id: times_spinner
            text: '5'
            values: root.times_values
        Label:
            text: 'Substraction'
        CheckBox:
            id: negative_checkbox
            active: False
        Label:
            text: 'Fixed'
        CheckBox:
            id: fixed_checkbox
            active: False
    Button:
        text: 'Start'
        on_release: root.parent.next_exercise()


<AnzanManualScreen@Screen>:
    name: 'play_manual_anzan'
    AnzanManualRoot:

# FLASH #
<AnzanFlash>:
    orientation: 'vertical'
    Button:
        size_hint_y: 1
        background_color: 0, 0, 0, 1
        font_size: '200dp'
        text: root.current_number

<AnzanFlashConfiguration>:
    orientation: 'vertical'
    digits: digits_spinner
    times: times_spinner
    negative: negative_checkbox
    fixed: fixed_checkbox
    GridLayout:
        cols: 2
        Label:
            text: 'Digits'
        Spinner:
            id: digits_spinner
            text: '1'
            values: root.digits_values
        Label:
            text: 'Times'
        Spinner:
            id: times_spinner
            text: '5'
            values: root.times_values
        Label:
            text: 'Substraction'
        CheckBox:
            id: negative_checkbox
            active: False
        Label:
            text: 'Fixed'
        CheckBox:
            id: fixed_checkbox
            active: False
    Button:
        text: 'Start'
        on_release: root.parent.next_exercise()


<AnzanFlashScreen@Screen>:
    name: 'play_flash_anzan'
    AnzanFlashRoot:
                

####### GUESS THE DAY #######

<DateMenuScreen>:
    BoxLayout:
        orientation: 'vertical'
        spacing: '30dp'
        padding: '30dp'
        MenuButton:
            text: 'Play'
            on_release: Factory.NotImplementedPopup().open()
        MenuButton:
            text: 'Back'
            on_release: root.manager.current = 'main_menu'

<SettingsMenuScreen>:
    BoxLayout:
        orientation: 'vertical'
        spacing: '30dp'
        padding: '30dp'
        MenuButton:
            text: 'My settings button'
            on_release: Factory.NotImplementedPopup().open()
        MenuButton:
            text: 'Back to menu'
            on_release: root.manager.current = 'main_menu'
